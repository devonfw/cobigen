<?xml version="1.0" encoding="UTF-8"?>
<tns:templateSetConfiguration version="6.0"
  xmlns:tns="http://capgemini.com/devonfw/cobigen/TemplateSetConfiguration"
  xmlns:cc="http://capgemini.com/devonfw/cobigen/ContextConfiguration"
  xmlns:tc="http://capgemini.com/devonfw/cobigen/TemplatesConfiguration"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://capgemini.com/devonfw/cobigen/TemplateSetConfiguration templateSetConfiguration.xsd
                      ">
  <cc:contextConfiguration version="3.0">
    <cc:trigger id="crud_openapi_java_server_app" type="openapi">
      <cc:containerMatcher type="element" value="openAPIFile" />
      <cc:matcher type="element" value="EntityDef">
        <cc:variableAssignment type="extension" key="rootPackage"
          value="x-rootpackage" />
        <cc:variableAssignment type="property" key="component"
          value="componentName" />
        <cc:variableAssignment type="property" key="entityName" value="name" />
      </cc:matcher>
    </cc:trigger>
    <cc:tags>
      <cc:tag name="Java"></cc:tag>
      <cc:tag name="OpenAPI"></cc:tag>
      <cc:tag name="CRUD"></cc:tag>
      <cc:tag name="Server"></cc:tag>
      <cc:tag name="App"></cc:tag>
    </cc:tags>
    <cc:links>
      <cc:link
        url="https://github.com/devonfw/cobigen/wiki/howto-devonfw-ide-CobiGen-PoC-E2E"></cc:link>
    </cc:links>
  </cc:contextConfiguration>
  <tc:templatesConfiguration version="5.0">
    <tc:templates>
      <tc:templateExtension ref="${variables.entityName}Eto.java"
        mergeStrategy="javamerge" />

    </tc:templates>

    <tc:templateScans>
      <tc:templateScan templatePath="templates" destinationPath="src/main" />
    </tc:templateScans>

    <tc:increments>
      <tc:increment name="server" description="CRUD devon4j Server"
        explanation="Creates (backends) server CRUD service for java application.">
        <tc:incrementRef ref="rest_service_impl" />
      </tc:increment>

      <tc:increment name="rest_service_impl" description="CRUD REST services">
        <tc:templateRef ref="${variables.entityName}Eto.java"/>
      </tc:increment>

    </tc:increments>
  </tc:templatesConfiguration>

</tns:templateSetConfiguration>